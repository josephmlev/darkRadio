# README

This example in C demonstrates how to configure a ADQ3 series digitizer and
acquire data using the data readout interface.

# Default behavior

The *default* behavior of the example application is to collect 20 records on
each channel using a software trigger. The input signal is a triangle wave
generated by a *test pattern generator*. To acquire ADC data, set
`TEST_PATTERN_SOURCE` to `ADQ_TEST_PATTERN_SOURCE_DISABLE` in the header file
`settings.h`.

If the digitizer has the FWATD firmware booted the *default* behaviour is to accumulate
100 records three times.

# Structure

The application can be broken down into four stages:

1. Device identification
2. Device configuration (configuration parameters are located in the header file
   `settings.h`)
3. Data acquisition
4. Cleanup

The source code includes comments to highlight and explain important actions.

# Compiling

To compile the example application, please follow the instructions for your
operating system in one of the sections below.

## CMake (Windows and Linux)
1. Ensure `cmake` is installed on the system and run
   ```
   $ cmake . -B build
   ```
   on Windows the platform and/or generator may have to be specified when using MSCV, e.g.
   ```
   > cmake . -G "Visual Studio 15 2017" -A x64 -B build
   ```

2. Run `cmake --build build` to compile the source code into a binary file.


## Bat-script (Windows only)

1. Open a command prompt and run
   ```
   > compile_x64.bat
   ```
   to compile the application into a binary.

   This step requires a valid installation of Microsoft Visual Studio with
   support for C99 or later versions. The `.bat` script assumes Visual Studio
   2017. Please adjust the `VCVARSALL_PATH` appropriately if a different version
   is installed.
